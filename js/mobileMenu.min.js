!function(a,b,c,d){var e={width:1024,next:'<span class="arrow">&rsaquo;</span>',prev:'<span class="back-arrow">&lsaquo;</span>'};a.fn.mobileMenu=function(c){var d=a.extend({},e,c),f=this.first(),g=f.attr("id"),h=f.attr("class"),i=!1;return f.init=function(){function e(){a("body").toggleClass("bodyFixed"),setTimeout(function(){a(".close-list").removeClass("close-list")},400)}function j(){function k(){if(!(a(".multilevelMenu").length>0))return!1;a("body").append('<span class="js-swipe"></span>');var b=0,c=0;a(".js-swipe, .multilevelMenu").on("touchstart",function(a){b=a.originalEvent.changedTouches[0].pageX}),a(".js-swipe").on("touchend",function(a){c=a.originalEvent.changedTouches[0].pageX,c>b&&e()}),a(".multilevelMenu").on("touchend",function(d){c=d.originalEvent.changedTouches[0].pageX,c<b&&(a("body").removeClass("bodyFixed"),setTimeout(function(){a(".close-list").removeClass("close-list")},400))})}var j=b.innerWidth?b.innerWidth:a(b).width();if(j<d.width){if(!i){i=!0,c.removeAttr("id"),c.removeClass(),c.addClass("multilevelMenu"),k();var l=f.find("a");l.append(function(b,c){var e="";return 0!=a(this).parent("li").find("ul").length&&(e=d.next),e}),c.find("li").find("ul").prepend('<li class="back js-back"></li>');var m=d.next.match(/class="(.*?)"/i)[1],n=l.find("."+m);n.each(function(){a(this).addClass("js-arrow")}),a(l).on("click",".js-arrow",function(b){b.preventDefault(),b.stopPropagation(),a(this).parents("ul").addClass("close-list"),a(this).closest("li").children("ul").addClass("active-menu");var c=a(this).parents("a").text();c.length>0&&(c=c.substring(0,c.length-1)),a(this).closest("li").find("li.back").text(c),a(".js-back").append(d.prev)}),a(".js-back").click(function(){a(this).closest("ul.close-list").removeClass("close-list");var b=this;setTimeout(function(){a(b).closest("ul").removeClass("active-menu")},400)})}}else i&&(i=!1,c.attr("id",g),c.attr("class",h),a(".js-arrow, .js-back, .js-swipe").detach()),a("body").removeClass("bodyFixed"),c.find("ul").removeClass()}var c=this;a("body").append('<div class="multilevelOverlay js-overlay"></div>'),j(),a(b).resize(function(){j()}),a(".js-toggle").add(a(".js-overlay")).on("click",function(){e()})},f.init(),this}}(jQuery,window,document);
